"use strict";(self.webpackChunkflamingock=self.webpackChunkflamingock||[]).push([[2421],{1470:(e,n,i)=>{i.d(n,{A:()=>k});var a=i(6540),s=i(4164),t=i(7559),r=i(3104),l=i(6347),o=i(205),c=i(7485),d=i(1682),h=i(679);function u(e){return a.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function g(e){const{values:n,children:i}=e;return(0,a.useMemo)(()=>{const e=n??function(e){return u(e).map(({props:{value:e,label:n,attributes:i,default:a}})=>({value:e,label:n,attributes:i,default:a}))}(i);return function(e){const n=(0,d.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,i])}function p({value:e,tabValues:n}){return n.some(n=>n.value===e)}function m({queryString:e=!1,groupId:n}){const i=(0,l.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(s),(0,a.useCallback)(e=>{if(!s)return;const n=new URLSearchParams(i.location.search);n.set(s,e),i.replace({...i.location,search:n.toString()})},[s,i])]}function x(e){const{defaultValue:n,queryString:i=!1,groupId:s}=e,t=g(e),[r,l]=(0,a.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const i=n.find(e=>e.default)??n[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:t})),[c,d]=m({queryString:i,groupId:s}),[u,x]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[i,s]=(0,h.Dv)(n);return[i,(0,a.useCallback)(e=>{n&&s.set(e)},[n,s])]}({groupId:s}),j=(()=>{const e=c??u;return p({value:e,tabValues:t})?e:null})();(0,o.A)(()=>{j&&l(j)},[j]);return{selectedValue:r,selectValue:(0,a.useCallback)(e=>{if(!p({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),x(e)},[d,x,t]),tabValues:t}}var j=i(2303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var y=i(4848);function v({className:e,block:n,selectedValue:i,selectValue:a,tabValues:t}){const l=[],{blockElementScrollPositionUntilNextRender:o}=(0,r.a_)(),c=e=>{const n=e.currentTarget,s=l.indexOf(n),r=t[s].value;r!==i&&(o(n),a(r))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const i=l.indexOf(e.currentTarget)+1;n=l[i]??l[0];break}case"ArrowLeft":{const i=l.indexOf(e.currentTarget)-1;n=l[i]??l[l.length-1];break}}n?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:t.map(({value:e,label:n,attributes:a})=>(0,y.jsx)("li",{role:"tab",tabIndex:i===e?0:-1,"aria-selected":i===e,ref:e=>{l.push(e)},onKeyDown:d,onClick:c,...a,className:(0,s.A)("tabs__item",f.tabItem,a?.className,{"tabs__item--active":i===e}),children:n??e},e))})}function b({lazy:e,children:n,selectedValue:i}){const t=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=t.find(e=>e.props.value===i);return e?(0,a.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:t.map((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==i}))})}function w(e){const n=x(e);return(0,y.jsxs)("div",{className:(0,s.A)(t.G.tabs.container,"tabs-container",f.tabList),children:[(0,y.jsx)(v,{...n,...e}),(0,y.jsx)(b,{...n,...e})]})}function k(e){const n=(0,j.A)();return(0,y.jsx)(w,{...e,children:u(e.children)},String(n))}},5218:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>g,frontMatter:()=>o,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"flamingock-library-config/setup-and-stages","title":"Setup & Stages","description":"The Flamingock setup organizes and executes your changes using stages. By default, you\'ll use a single stage that groups all your changes and executes them sequentially.","source":"@site/docs/flamingock-library-config/setup-and-stages.md","sourceDirName":"flamingock-library-config","slug":"/flamingock-library-config/setup-and-stages","permalink":"/flamingock-library-config/setup-and-stages","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"Introduction","permalink":"/flamingock-library-config/introduction"},"next":{"title":"Context and dependencies","permalink":"/flamingock-library-config/context-and-dependencies"}}');var s=i(4848),t=i(8453),r=i(1470),l=i(9365);const o={sidebar_position:10},c="Setup & Stages",d={},h=[{value:"Setup configuration",id:"setup-configuration",level:2},{value:"Defining the setup",id:"defining-the-setup",level:2},{value:"Where changes are located",id:"where-changes-are-located",level:2},{value:"Multiple stages (Advanced)",id:"multiple-stages-advanced",level:2},{value:"When to use multiple stages",id:"when-to-use-multiple-stages",level:3},{value:"Multi-module applications",id:"multi-module-applications",level:4},{value:"Functional separation",id:"functional-separation",level:4},{value:"Restrictions and important considerations",id:"restrictions-and-important-considerations",level:3},{value:"No execution order guarantees",id:"no-execution-order-guarantees",level:4},{value:"Why this matters?",id:"why-this-matters",level:4},{value:"Correct approach",id:"correct-approach",level:4},{value:"When NOT to use multiple stages",id:"when-not-to-use-multiple-stages",level:3},{value:"Required fields",id:"required-fields",level:2},{value:"Stage fields",id:"stage-fields",level:2},{value:"Example pipeline",id:"example-pipeline",level:2},{value:"\u2705 Best Practices",id:"-best-practices",level:2},{value:"Single stage execution (default and recommended)",id:"single-stage-execution-default-and-recommended",level:3},{value:"Placing your changes",id:"placing-your-changes",level:3},{value:"Naming convention for Changes",id:"naming-convention-for-changes",level:3},{value:"\ud83d\udee0 Troubleshooting",id:"-troubleshooting",level:2},{value:"My stage isn&#39;t picked up",id:"my-stage-isnt-picked-up",level:3},{value:"No changes found in stage",id:"no-changes-found-in-stage",level:3},{value:"Setup validation",id:"setup-validation",level:2},{value:"Strict stage mapping",id:"strict-stage-mapping",level:3},{value:"Compilation fails with &quot;unmapped changes&quot; error",id:"compilation-fails-with-unmapped-changes-error",level:3},{value:"Example scenarios",id:"example-scenarios",level:3}];function u(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"setup--stages",children:"Setup & Stages"})}),"\n",(0,s.jsxs)(n.p,{children:["The Flamingock ",(0,s.jsx)(n.strong,{children:"setup"})," organizes and executes your changes using ",(0,s.jsx)(n.strong,{children:"stages"}),". By default, you'll use a single stage that groups all your changes and executes them sequentially."]}),"\n",(0,s.jsx)(n.p,{children:"Changes within a stage are executed sequentially with order guaranteed. However, execution order between stages is not guaranteed."}),"\n",(0,s.jsx)(n.h2,{id:"setup-configuration",children:"Setup configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Flamingock is configured using the ",(0,s.jsx)(n.code,{children:"@EnableFlamingock"})," annotation on any class in your application. This annotation is required for all environments \u2014 whether you're using the standalone runner or Spring Boot integration."]}),"\n",(0,s.jsxs)(n.p,{children:["The annotation is ",(0,s.jsx)(n.strong,{children:"only"})," used to define the setup (stages and their sources); it does not include or support runtime configuration."]}),"\n",(0,s.jsx)(n.h2,{id:"defining-the-setup",children:"Defining the setup"}),"\n",(0,s.jsx)(n.p,{children:"Here's the default single-stage configuration:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@EnableFlamingock(\n    stages = { @Stage(location = "com.yourcompany.changes") }\n)\npublic class FlamingockConfig {\n    // Configuration class\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Alternatively, using a YAML file:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@EnableFlamingock( pipelineFile = "config/setup.yaml" )\npublic class FlamingockConfig {}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Where ",(0,s.jsx)(n.code,{children:"config/setup.yaml"})," contains:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"pipeline:\n  stages:\n    - name: main\n      location: com.yourcompany.changes\n"})}),"\n",(0,s.jsx)(n.admonition,{title:"Advanced options:",type:"info",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multiple stages"}),": For complex scenarios requiring independent change sets go to the ",(0,s.jsx)(n.a,{href:"#multiple-stages-advanced",children:"stage section below"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"File-based configuration"}),": Use ",(0,s.jsx)(n.code,{children:"pipelineFile"})," parameter for YAML configuration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Explicit naming"}),": Use ",(0,s.jsx)(n.code,{children:'@Stage(name = "custom", location = "com.yourcompany.changes")'})]}),"\n"]})}),"\n",(0,s.jsx)(n.h2,{id:"where-changes-are-located",children:"Where changes are located"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"location"})})," refers to a source package (e.g., ",(0,s.jsx)(n.code,{children:"com.company.changes"}),"), a relative(e.g., ",(0,s.jsx)(n.code,{children:"my/path/changes"}),") or absolute(e.g., ",(0,s.jsx)(n.code,{children:"/my/path/changes"}),") resources directory.","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Template-based and code-based changes can co-exist if location is a source package."}),"\n",(0,s.jsx)(n.li,{children:"If location references a resource directory, it only accepts template-based changes."}),"\n",(0,s.jsxs)(n.li,{children:["Default source roots: ",(0,s.jsx)(n.code,{children:"src/main/java"}),", ",(0,s.jsx)(n.code,{children:"src/main/kotlin"}),", ",(0,s.jsx)(n.code,{children:"src/main/scala"}),", ",(0,s.jsx)(n.code,{children:"src/main/groovy"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Source root can be customized via the ",(0,s.jsx)(n.code,{children:"sources"})," compiler option."]}),"\n",(0,s.jsxs)(n.li,{children:["Resource root can be customized via the ",(0,s.jsx)(n.code,{children:"resources"})," compiler option."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"multiple-stages-advanced",children:"Multiple stages (Advanced)"}),"\n",(0,s.jsx)(n.p,{children:"Most applications will naturally fit into a single stage, which keeps things simple and ensures a clear, deterministic execution order.\nHowever, if you prefer to organize changes into multiple stages\u2014for example, to separate concerns or enforce isolated execution\nflows\u2014Flamingock fully supports that as well. We\u2019ll explain how it works and what to consider when taking that approach."}),"\n",(0,s.jsx)(n.admonition,{title:"Default approach:",type:"tip",children:(0,s.jsxs)(n.p,{children:["Most applications use a single stage: ",(0,s.jsx)(n.code,{children:'@Stage(location = "com.yourcompany.changes")'}),'. The name is auto-derived ("changes") and this is the recommended default setup.']})}),"\n",(0,s.jsx)(n.h3,{id:"when-to-use-multiple-stages",children:"When to use multiple stages"}),"\n",(0,s.jsx)(n.p,{children:"Multiple stages are beneficial in specific scenarios:"}),"\n",(0,s.jsx)(n.h4,{id:"multi-module-applications",children:"Multi-module applications"}),"\n",(0,s.jsx)(n.p,{children:"In monolithic applications with well-defined module boundaries, you can give each module its own stage for full autonomy:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@EnableFlamingock(\n    stages = {\n        @Stage(name = "user-module", location = "com.yourapp.users.changes"),\n        @Stage(name = "billing-module", location = "com.yourapp.billing.changes"),\n        @Stage(name = "notification-module", location = "com.yourapp.notifications.changes")\n    }\n)\n'})}),"\n",(0,s.jsx)(n.p,{children:"This approach allows:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Independent change management across modules"}),"\n",(0,s.jsx)(n.li,{children:"Different release cycles for different modules"}),"\n",(0,s.jsx)(n.li,{children:"Clear separation of concerns and responsibilities"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"functional-separation",children:"Functional separation"}),"\n",(0,s.jsx)(n.p,{children:"You might want to separate changes by function or lifecycle:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@EnableFlamingock(\n    stages = {\n        @Stage(name = "core-setup", location = "com.yourapp.setup.changes"),\n        @Stage(name = "business-logic", location = "com.yourapp.business.changes"),\n        @Stage(name = "monitoring-setup", location = "com.yourapp.monitoring.changes")\n    }\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"restrictions-and-important-considerations",children:"Restrictions and important considerations"}),"\n",(0,s.jsx)(n.h4,{id:"no-execution-order-guarantees",children:"No execution order guarantees"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Critical limitation"}),": Flamingock does not guarantee execution order between stages. This means:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Stage A might execute before, after, or concurrently with Stage B"}),"\n",(0,s.jsx)(n.li,{children:"You cannot rely on changes in one stage being applied before another stage starts"}),"\n",(0,s.jsx)(n.li,{children:"Each stage should be completely independent from others"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"why-this-matters",children:"Why this matters?"}),"\n",(0,s.jsx)(n.p,{children:"Consider this problematic scenario:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'// \u274c PROBLEMATIC: Relies on execution order\n@EnableFlamingock(\n    stages = {\n        @Stage(name = "create-tables", location = "com.yourapp.schema"),     // Creates tables\n        @Stage(name = "seed-data", location = "com.yourapp.data")           // Inserts data - DEPENDS on tables existing!\n    }\n)\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"seed-data"})," stage might execute before ",(0,s.jsx)(n.code,{children:"create-tables"}),", causing failures."]}),"\n",(0,s.jsx)(n.h4,{id:"correct-approach",children:"Correct approach"}),"\n",(0,s.jsx)(n.p,{children:"Instead, group dependent changes in the same stage:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'// \u2705 CORRECT: All related changes in one stage\n@EnableFlamingock(\n    stages = {\n        @Stage(location = "com.yourapp.changes")  // Contains both table creation AND data seeding in order\n    }\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"when-not-to-use-multiple-stages",children:"When NOT to use multiple stages"}),"\n",(0,s.jsx)(n.p,{children:"Avoid multiple stages when:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"You need execution order across different change types"})," - Use a single stage instead"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Changes are logically related"})," - Keep them together for easier maintenance"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Simple applications"})," - The complexity isn't worth the overhead"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cross-cutting concerns"})," - Changes that affect multiple areas should be in one stage"]}),"\n"]}),"\n",(0,s.jsxs)(n.admonition,{title:"Future Enhancements",type:"info",children:[(0,s.jsx)(n.p,{children:"Conditional stage execution based on dependencies or conditions is planned for future releases, which would allow:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Running stages based on success/failure of other stages"}),"\n",(0,s.jsx)(n.li,{children:"Defining explicit dependencies between stages"}),"\n",(0,s.jsx)(n.li,{children:"More sophisticated stage orchestration patterns"}),"\n"]})]}),"\n",(0,s.jsx)(n.h2,{id:"required-fields",children:"Required fields"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"@EnableFlamingock"})," annotation must define:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"stages"}),": Array of stage configurations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"strictStageMapping"})," (optional): Validation mode for unmapped changes (default: ",(0,s.jsx)(n.code,{children:"true"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Each stage must define:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"})," (optional): A unique identifier - if not provided, it will be auto-derived from the location"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"location"}),": The package or directory where changes are located"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"stage-fields",children:"Stage fields"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"location"})}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:"Package or directory scanned for both code-based and template-based changes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"name"})}),(0,s.jsx)(n.td,{children:"\u274c"}),(0,s.jsx)(n.td,{children:"Unique identifier for the stage (auto-derived from location if not provided)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"description"})}),(0,s.jsx)(n.td,{children:"\u274c"}),(0,s.jsx)(n.td,{children:"Optional text explaining the stage's purpose"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"example-pipeline",children:"Example pipeline"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"pipeline:\n  stages:\n    - name: user-setup\n      description: User-related DB setup\n      location: com.yourapp.flamingock.users\n"})}),"\n",(0,s.jsx)(n.p,{children:"Folder view:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"src/\n  main/\n    java/\n      com/\n        yourapp/\n          flamingock/\n            users/\n              _0001__CreateUsersTable.java\n              _0002__AddIndex.yaml\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-best-practices",children:"\u2705 Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"single-stage-execution-default-and-recommended",children:"Single stage execution (default and recommended)"}),"\n",(0,s.jsxs)(n.p,{children:["In most applications, ",(0,s.jsx)(n.strong,{children:"changes that require a specific, deterministic execution order"})," should be grouped into a ",(0,s.jsx)(n.strong,{children:"single stage"}),". This ensures they are applied sequentially and in the exact order they are defined."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@EnableFlamingock(\n    stages = {\n        @Stage(location = "com.yourcompany.changes")\n    }\n)\n'})}),"\n",(0,s.jsx)(n.p,{children:"Grouping related changes into a single stage:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Ensures ",(0,s.jsx)(n.strong,{children:"predictable, sequential execution"})]}),"\n",(0,s.jsx)(n.li,{children:"Avoids ambiguity from cross-stage execution timing"}),"\n",(0,s.jsx)(n.li,{children:"Eliminates the need to manage inter-stage dependencies"}),"\n",(0,s.jsx)(n.li,{children:"Keeps setup simple and easier to maintain"}),"\n",(0,s.jsx)(n.li,{children:"Supports mixing all types of changes (Kafka, MongoDB, SQL, S3, etc.) in a well-defined order"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Advanced scenarios",type:"info",children:(0,s.jsxs)(n.p,{children:["If your application benefits from separating changes\u2014for example, by module or lifecycle\u2014you can define ",(0,s.jsx)(n.a,{href:"#multiple-stages-advanced",children:"Multiple Stages (Advanced)"}),". Just remember: deterministic execution is guaranteed only within a stage, not across them."]})}),"\n",(0,s.jsx)(n.h3,{id:"placing-your-changes",children:"Placing your changes"}),"\n",(0,s.jsxs)(n.p,{children:["We strongly recommend placing all your changes \u2014 code-based and template-based \u2014 in a ",(0,s.jsx)(n.strong,{children:"single location"})," defined by the ",(0,s.jsx)(n.code,{children:"@Stage"})," annotation."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Ensures changes are always scanned, regardless of type"}),"\n",(0,s.jsx)(n.li,{children:"Avoids needing two locations if one template-based change requires fallback to code"}),"\n",(0,s.jsx)(n.li,{children:"Keeps everything in one logical location"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"naming-convention-for-changes",children:"Naming convention for Changes"}),"\n",(0,s.jsx)(n.p,{children:"To ensure clarity and enforce ordering, we recommend naming changes using the following format:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"_0001__CreateClientsTable.java\n_0002__AddIndexToEmail.yaml\n_0003__MigrateData.java\n_0004__ComplexChange.yaml\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ORDER"}),": The execution order extracted between the first ",(0,s.jsx)(n.code,{children:"_"})," and last ",(0,s.jsx)(n.code,{children:"_"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Recommended format"}),": ",(0,s.jsx)(n.code,{children:"NNNN"})," with left-padding zeros (e.g., ",(0,s.jsx)(n.code,{children:"0001"}),", ",(0,s.jsx)(n.code,{children:"0002"}),", ",(0,s.jsx)(n.code,{children:"0010"}),")"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"CHANGE_NAME"}),": Descriptive name of what the change does"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This convention:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Eliminates the need for order in annotations/YAML"})," - the order is extracted from the filename"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Natural sequential sorting"})," - files automatically sort numerically"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Clear execution order"})," - instantly see the sequence of changes"]}),"\n",(0,s.jsx)(n.li,{children:"Works across both code-based and template-based formats"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Sufficient capacity"})," - supports up to 99 changes with two-digit format"]}),"\n",(0,s.jsx)(n.li,{children:"Ensures consistent naming and project hygiene"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["While Java typically avoids underscores and leading digits, change units are not traditional classes. Prioritizing ",(0,s.jsx)(n.strong,{children:"readability and order"})," is more valuable in this context."]})}),"\n",(0,s.jsx)(n.admonition,{title:"Complete Order Field Rules",type:"info",children:(0,s.jsxs)(n.p,{children:["For detailed rules about order and file naming, see ",(0,s.jsx)(n.a,{href:"../changes/anatomy-and-structure#file-name-and-order",children:"Change Anatomy - File name and order"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"-troubleshooting",children:"\ud83d\udee0 Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"my-stage-isnt-picked-up",children:"My stage isn't picked up"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Make sure the stage has a ",(0,s.jsx)(n.code,{children:"location"})," field defined"]}),"\n",(0,s.jsxs)(n.li,{children:["Check the file path is correct and uses ",(0,s.jsx)(n.code,{children:"/"})," as a separator, not ",(0,s.jsx)(n.code,{children:"."})," in YAML"]}),"\n",(0,s.jsxs)(n.li,{children:["If using resource directory paths, make sure the file is placed under ",(0,s.jsx)(n.code,{children:"src/main/resources/your-dir"})]}),"\n",(0,s.jsxs)(n.li,{children:["If your project uses non-standard paths (for example, source code or resources are not under ",(0,s.jsx)(n.code,{children:"src/main/java"})," or ",(0,s.jsx)(n.code,{children:"src/main/resources"}),"), Flamingock may not detect your change files automatically.",(0,s.jsx)(n.br,{}),"\n","You can customize the compiler arguments to tell Flamingock where to look:"]}),"\n"]}),"\n",(0,s.jsxs)(r.A,{groupId:"gradle_maven",children:[(0,s.jsx)(l.A,{value:"gradle",label:"Gradle",default:!0,children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-kotlin",children:'tasks.withType<JavaCompile> {\n    options.compilerArgs.addAll(listOf(\n        "-Asources=custom/src",\n        "-Aresources=custom/resources"\n    ))\n}\n'})})}),(0,s.jsx)(l.A,{value:"maven",label:"Maven",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"<build>\n  <plugins>\n    <plugin>\n      <artifactId>maven-compiler-plugin</artifactId>\n      <configuration>\n        <compilerArgs>\n          <arg>-Asources=custom/src</arg>\n          <arg>-Aresources=custom/resources</arg>\n        </compilerArgs>\n      </configuration>\n    </plugin>\n  </plugins>\n</build>\n"})})})]}),"\n",(0,s.jsx)(n.p,{children:"By default, Flamingock automatically scans the following source and resource roots:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"src/main/java"}),"\n",(0,s.jsx)(n.li,{children:"src/main/kotlin"}),"\n",(0,s.jsx)(n.li,{children:"src/main/scala"}),"\n",(0,s.jsx)(n.li,{children:"src/main/groovy"}),"\n",(0,s.jsx)(n.li,{children:"src/main/resources"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"no-changes-found-in-stage",children:"No changes found in stage"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Verify that the class or YAML file is located in the expected package/directory"}),"\n",(0,s.jsxs)(n.li,{children:["For code-based changes, ensure the class is annotated with ",(0,s.jsx)(n.code,{children:"@Change"})]}),"\n",(0,s.jsx)(n.li,{children:"For template-based changes, check file names and YAML formatting"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"setup-validation",children:"Setup validation"}),"\n",(0,s.jsxs)(n.p,{children:["Flamingock validates that all code-based changes (classes annotated with ",(0,s.jsx)(n.code,{children:"@Change"}),") are properly mapped to a stage during compilation."]}),"\n",(0,s.jsx)(n.h3,{id:"strict-stage-mapping",children:"Strict stage mapping"}),"\n",(0,s.jsx)(n.p,{children:"By default, Flamingock enforces strict stage mapping validation:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@EnableFlamingock(\n    stages = { @Stage(location = "com.yourcompany.changes") },\n    strictStageMapping = true  // Default behavior\n)\npublic class FlamingockConfig {\n    // Configuration class\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.code,{children:"strictStageMapping"})," is enabled (default):"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Compilation fails"})," if any ",(0,s.jsx)(n.code,{children:"@Change"})," class is found outside the configured stage locations"]}),"\n",(0,s.jsx)(n.li,{children:"Ensures all changes are properly organized and will be executed"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.code,{children:"strictStageMapping"})," is disabled:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Only warnings are emitted"})," for unmapped changes during compilation"]}),"\n",(0,s.jsx)(n.li,{children:"Unmapped changes will be ignored at runtime"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"compilation-fails-with-unmapped-changes-error",children:'Compilation fails with "unmapped changes" error'}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Check that all ",(0,s.jsx)(n.code,{children:"@Change"})," classes are located within the configured stage locations"]}),"\n",(0,s.jsxs)(n.li,{children:["If you have changes in multiple locations, consider adding an additional stages to cover them. Visit our ",(0,s.jsx)(n.a,{href:"#multiple-stages-advanced",children:"multiple-stages"})," sections for more information"]}),"\n",(0,s.jsxs)(n.li,{children:["Temporarily set ",(0,s.jsx)(n.code,{children:"strictStageMapping = false"})," to see warnings instead of errors during migration"]}),"\n",(0,s.jsx)(n.li,{children:"Move unmapped changes to the correct stage location or remove unused changes"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"example-scenarios",children:"Example scenarios"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Scenario 1: Change outside configured location (strict mode)"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@EnableFlamingock(\n    stages = { @Stage(location = "com.yourcompany.changes") },\n    strictStageMapping = true  // Default\n)\n'})}),"\n",(0,s.jsxs)(n.p,{children:["If you have a change at ",(0,s.jsx)(n.code,{children:"com.yourcompany.yourpackage.OldChange"})," (outside the configured location):"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u274c ",(0,s.jsx)(n.strong,{children:"Compilation fails"})," with detailed error message"]}),"\n",(0,s.jsxs)(n.li,{children:["Must move the change to ",(0,s.jsx)(n.code,{children:"com.yourcompany.changes"})," or add a new stage with location ",(0,s.jsx)(n.code,{children:"com.yourcompany.yourpackage.OldChange"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Scenario 2: Relaxed validation"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@EnableFlamingock(\n    stages = { @Stage(location = "com.yourcompany.changes") },\n    strictStageMapping = false  // Relaxed mode\n)\n'})}),"\n",(0,s.jsxs)(n.p,{children:["If you have a change at ",(0,s.jsx)(n.code,{children:"com.yourcompany.yourpackage.OldChange"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u26a0\ufe0f ",(0,s.jsx)(n.strong,{children:"Warning emitted"})," during compilation"]}),"\n",(0,s.jsx)(n.li,{children:"Compilation succeeds but change is ignored at runtime"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Best Practice",type:"tip",children:(0,s.jsxs)(n.p,{children:["Keep ",(0,s.jsx)(n.code,{children:"strictStageMapping = true"})," (default) to ensure all changes are properly mapped and executed. Only disable it temporarily during large refactoring or migration scenarios."]})})]})}function g(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var a=i(6540);const s={},t=a.createContext(s);function r(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(t.Provider,{value:n},e.children)}},9365:(e,n,i)=>{i.d(n,{A:()=>r});i(6540);var a=i(4164);const s={tabItem:"tabItem_Ymn6"};var t=i(4848);function r({children:e,hidden:n,className:i}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,a.A)(s.tabItem,i),hidden:n,children:e})}}}]);