"use strict";(self.webpackChunkflamingock=self.webpackChunkflamingock||[]).push([[2421],{1470:(e,n,s)=>{s.d(n,{A:()=>S});var a=s(6540),i=s(4164),t=s(3104),r=s(6347),l=s(205),o=s(7485),c=s(1682),d=s(679);function u(e){return a.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h(e){const{values:n,children:s}=e;return(0,a.useMemo)(()=>{const e=n??function(e){return u(e).map(({props:{value:e,label:n,attributes:s,default:a}})=>({value:e,label:n,attributes:s,default:a}))}(s);return function(e){const n=(0,c.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,s])}function g({value:e,tabValues:n}){return n.some(n=>n.value===e)}function p({queryString:e=!1,groupId:n}){const s=(0,r.W6)(),i=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,o.aZ)(i),(0,a.useCallback)(e=>{if(!i)return;const n=new URLSearchParams(s.location.search);n.set(i,e),s.replace({...s.location,search:n.toString()})},[i,s])]}function m(e){const{defaultValue:n,queryString:s=!1,groupId:i}=e,t=h(e),[r,o]=(0,a.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!g({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const s=n.find(e=>e.default)??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:t})),[c,u]=p({queryString:s,groupId:i}),[m,x]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[s,i]=(0,d.Dv)(n);return[s,(0,a.useCallback)(e=>{n&&i.set(e)},[n,i])]}({groupId:i}),j=(()=>{const e=c??m;return g({value:e,tabValues:t})?e:null})();(0,l.A)(()=>{j&&o(j)},[j]);return{selectedValue:r,selectValue:(0,a.useCallback)(e=>{if(!g({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),x(e)},[u,x,t]),tabValues:t}}var x=s(2303);const j={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=s(4848);function y({className:e,block:n,selectedValue:s,selectValue:a,tabValues:r}){const l=[],{blockElementScrollPositionUntilNextRender:o}=(0,t.a_)(),c=e=>{const n=e.currentTarget,i=l.indexOf(n),t=r[i].value;t!==s&&(o(n),a(t))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const s=l.indexOf(e.currentTarget)+1;n=l[s]??l[0];break}case"ArrowLeft":{const s=l.indexOf(e.currentTarget)-1;n=l[s]??l[l.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":n},e),children:r.map(({value:e,label:n,attributes:a})=>(0,f.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>{l.push(e)},onKeyDown:d,onClick:c,...a,className:(0,i.A)("tabs__item",j.tabItem,a?.className,{"tabs__item--active":s===e}),children:n??e},e))})}function b({lazy:e,children:n,selectedValue:s}){const t=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=t.find(e=>e.props.value===s);return e?(0,a.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:t.map((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==s}))})}function v(e){const n=m(e);return(0,f.jsxs)("div",{className:(0,i.A)("tabs-container",j.tabList),children:[(0,f.jsx)(y,{...n,...e}),(0,f.jsx)(b,{...n,...e})]})}function S(e){const n=(0,x.A)();return(0,f.jsx)(v,{...e,children:u(e.children)},String(n))}},5218:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>g,frontMatter:()=>o,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"flamingock-library-config/setup-and-stages","title":"Setup & Stages","description":"The Flamingock setup organizes and executes your changes using stages. By default, you\'ll use a single stage that groups all your changes and executes them sequentially.","source":"@site/docs/flamingock-library-config/setup-and-stages.md","sourceDirName":"flamingock-library-config","slug":"/flamingock-library-config/setup-and-stages","permalink":"/docs/flamingock-library-config/setup-and-stages","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/flamingock-library-config/setup-and-stages.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Library Introduction","permalink":"/docs/flamingock-library-config/introduction"},"next":{"title":"ChangeUnits Deep Dive","permalink":"/docs/flamingock-library-config/changeunits-deep-dive"}}');var i=s(4848),t=s(8453),r=s(1470),l=s(9365);const o={sidebar_position:2},c="Setup & Stages",d={},u=[{value:"Setup configuration",id:"setup-configuration",level:2},{value:"Defining the setup",id:"defining-the-setup",level:2},{value:"Stage Types",id:"stage-types",level:2},{value:"Standard Stages (default)",id:"standard-stages-default",level:3},{value:"Special Stages",id:"special-stages",level:3},{value:"Multiple Stages (Advanced)",id:"multiple-stages-advanced",level:2},{value:"When to Use Multiple Stages",id:"when-to-use-multiple-stages",level:3},{value:"Multi-module Applications",id:"multi-module-applications",level:4},{value:"Functional Separation",id:"functional-separation",level:4},{value:"Restrictions and Important Considerations",id:"restrictions-and-important-considerations",level:3},{value:"No Execution Order Guarantees",id:"no-execution-order-guarantees",level:4},{value:"Why This Matters",id:"why-this-matters",level:4},{value:"Correct Approach",id:"correct-approach",level:4},{value:"When NOT to Use Multiple Stages",id:"when-not-to-use-multiple-stages",level:3},{value:"Required fields",id:"required-fields",level:2},{value:"Stage fields",id:"stage-fields",level:2},{value:"Where Changes are located",id:"where-changes-are-located",level:2},{value:"Example Pipeline",id:"example-pipeline",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Single Stage Execution (default and recommended)",id:"single-stage-execution-default-and-recommended",level:3},{value:"Placing your changes",id:"placing-your-changes",level:3},{value:"Naming Convention for Changes",id:"naming-convention-for-changes",level:3},{value:"\ud83d\udee0 Troubleshooting",id:"-troubleshooting",level:2},{value:"My stage isn&#39;t picked up",id:"my-stage-isnt-picked-up",level:3},{value:"No changes found in stage",id:"no-changes-found-in-stage",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"setup--stages",children:"Setup & Stages"})}),"\n",(0,i.jsxs)(n.p,{children:["The Flamingock ",(0,i.jsx)(n.strong,{children:"setup"})," organizes and executes your changes using ",(0,i.jsx)(n.strong,{children:"stages"}),". By default, you'll use a single stage that groups all your changes and executes them sequentially."]}),"\n",(0,i.jsx)(n.p,{children:"Changes within a stage are executed sequentially with order guaranteed. However, execution order between stages is not guaranteed - Flamingock handles system and legacy stages appropriately to ensure correctness."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"setup-configuration",children:"Setup configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Flamingock is configured using the ",(0,i.jsx)(n.code,{children:"@EnableFlamingock"})," annotation on any class in your application. This annotation is required for all environments \u2014 whether you're using the standalone runner or Spring Boot integration."]}),"\n",(0,i.jsxs)(n.p,{children:["The annotation is ",(0,i.jsx)(n.strong,{children:"only"})," used for defining the setup (stages and their sources). No runtime configuration should be placed here."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"defining-the-setup",children:"Defining the setup"}),"\n",(0,i.jsx)(n.p,{children:"Here's the default single-stage configuration:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@EnableFlamingock(\n    stages = {\n        @Stage(location = "com.yourcompany.changes")\n    }\n)\npublic class FlamingockConfig {\n    // Configuration class\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Alternatively, using a YAML file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@EnableFlamingock(pipelineFile = "config/setup.yaml")\npublic class FlamingockConfig {}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Where ",(0,i.jsx)(n.code,{children:"config/setup.yaml"})," contains:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"pipeline:\n  stages:\n    - name: main\n      location: com.yourcompany.changes\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"Advanced options:",type:"info",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Multiple stages"}),": For complex scenarios requiring independent change sets go to the ",(0,i.jsx)(n.a,{href:"#multiple-stages-advanced",children:"stage section below"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"File-based configuration"}),": Use ",(0,i.jsx)(n.code,{children:"pipelineFile"})," parameter for YAML configuration"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Explicit naming"}),": Use ",(0,i.jsx)(n.code,{children:'@Stage(name = "custom", location = "com.yourcompany.changes")'})]}),"\n"]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"stage-types",children:"Stage Types"}),"\n",(0,i.jsx)(n.p,{children:"Flamingock supports two families of stages:"}),"\n",(0,i.jsx)(n.h3,{id:"standard-stages-default",children:"Standard Stages (default)"}),"\n",(0,i.jsx)(n.p,{children:"The default stage type where users place their changes. This is where you'll put all your application changes (Kafka, MongoDB, SQL, S3, etc.). Standard stages execute changeUnits in order and provide predictable, sequential execution."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@EnableFlamingock(\n    stages = {\n        @Stage(location = "com.yourcompany.changes")  // Standard stage (default type)\n    }\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"special-stages",children:"Special Stages"}),"\n",(0,i.jsxs)(n.p,{children:["For specific scenarios, Flamingock provides special stage types that require explicitly specifying a ",(0,i.jsx)(n.code,{children:"type"})," parameter. Examples include ",(0,i.jsx)(n.code,{children:"SYSTEM"})," and ",(0,i.jsx)(n.code,{children:"LEGACY"})," stage types, which are used in particular contexts such as the Mongock upgrade process."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@EnableFlamingock(\n        stages = {\n                @Stage(type = SYSTEM, location = "com.yourapp.system"),\n                @Stage(type = LEGACY, location = "com.yourapp.mongock"),\n                @Stage(location = "com.yourcompany.changes")  // Standard stage (default type)\n        }\n)\n'})}),"\n",(0,i.jsxs)(n.p,{children:["To see these special stages in action, refer to the ",(0,i.jsx)(n.a,{href:"../resources/upgrade-from-mongock",children:"Upgrade from Mongock guide"})," which demonstrates their practical usage."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"multiple-stages-advanced",children:"Multiple Stages (Advanced)"}),"\n",(0,i.jsx)(n.p,{children:"Most applications will naturally fit into a single stage, which keeps things simple and ensures a clear, deterministic execution order.\nHowever, if you prefer to organize changes into multiple stages\u2014for example, to separate concerns or enforce isolated execution\nflows\u2014Flamingock fully supports that as well. We\u2019ll explain how it works and what to consider when taking that approach."}),"\n",(0,i.jsx)(n.admonition,{title:"Default approach:",type:"tip",children:(0,i.jsxs)(n.p,{children:["Most applications use a single stage: ",(0,i.jsx)(n.code,{children:'@Stage(location = "com.yourcompany.changes")'}),'. The name is auto-derived ("changes") and this is the recommended default setup.']})}),"\n",(0,i.jsx)(n.h3,{id:"when-to-use-multiple-stages",children:"When to Use Multiple Stages"}),"\n",(0,i.jsx)(n.p,{children:"Multiple stages are beneficial in specific scenarios:"}),"\n",(0,i.jsx)(n.h4,{id:"multi-module-applications",children:"Multi-module Applications"}),"\n",(0,i.jsx)(n.p,{children:"In monolithic applications with well-defined module boundaries, you can give each module its own stage for full autonomy:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@EnableFlamingock(\n    stages = {\n        @Stage(name = "user-module", location = "com.yourapp.users.changes"),\n        @Stage(name = "billing-module", location = "com.yourapp.billing.changes"),\n        @Stage(name = "notification-module", location = "com.yourapp.notifications.changes")\n    }\n)\n'})}),"\n",(0,i.jsx)(n.p,{children:"This approach allows:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Independent change management across modules"}),"\n",(0,i.jsx)(n.li,{children:"Different release cycles for different modules"}),"\n",(0,i.jsx)(n.li,{children:"Clear separation of concerns and responsibilities"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"functional-separation",children:"Functional Separation"}),"\n",(0,i.jsx)(n.p,{children:"You might want to separate changes by function or lifecycle:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@EnableFlamingock(\n    stages = {\n        @Stage(name = "core-setup", location = "com.yourapp.setup.changes"),\n        @Stage(name = "business-logic", location = "com.yourapp.business.changes"),\n        @Stage(name = "monitoring-setup", location = "com.yourapp.monitoring.changes")\n    }\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"restrictions-and-important-considerations",children:"Restrictions and Important Considerations"}),"\n",(0,i.jsx)(n.h4,{id:"no-execution-order-guarantees",children:"No Execution Order Guarantees"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Critical limitation"}),": Flamingock does not guarantee execution order between stages. This means:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Stage A might execute before, after, or concurrently with Stage B"}),"\n",(0,i.jsx)(n.li,{children:"You cannot rely on changes in one stage being applied before another stage starts"}),"\n",(0,i.jsx)(n.li,{children:"Each stage should be completely independent from others"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"why-this-matters",children:"Why This Matters"}),"\n",(0,i.jsx)(n.p,{children:"Consider this problematic scenario:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'// \u274c PROBLEMATIC: Relies on execution order\n@EnableFlamingock(\n    stages = {\n        @Stage(name = "create-tables", location = "com.yourapp.schema"),     // Creates tables\n        @Stage(name = "seed-data", location = "com.yourapp.data")           // Inserts data - DEPENDS on tables existing!\n    }\n)\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"seed-data"})," stage might execute before ",(0,i.jsx)(n.code,{children:"create-tables"}),", causing failures."]}),"\n",(0,i.jsx)(n.h4,{id:"correct-approach",children:"Correct Approach"}),"\n",(0,i.jsx)(n.p,{children:"Instead, group dependent changes in the same stage:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'// \u2705 CORRECT: All related changes in one stage\n@EnableFlamingock(\n    stages = {\n        @Stage(location = "com.yourapp.changes")  // Contains both table creation AND data seeding in order\n    }\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"when-not-to-use-multiple-stages",children:"When NOT to Use Multiple Stages"}),"\n",(0,i.jsx)(n.p,{children:"Avoid multiple stages when:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"You need execution order across different change types"})," - Use a single stage instead"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Changes are logically related"})," - Keep them together for easier maintenance"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Simple applications"})," - The complexity isn't worth the overhead"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cross-cutting concerns"})," - Changes that affect multiple areas should be in one stage"]}),"\n"]}),"\n",(0,i.jsxs)(n.admonition,{title:"Future Enhancements",type:"info",children:[(0,i.jsx)(n.p,{children:"Conditional stage execution based on dependencies or conditions is planned for future releases, which would allow:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Running stages based on success/failure of other stages"}),"\n",(0,i.jsx)(n.li,{children:"Defining explicit dependencies between stages"}),"\n",(0,i.jsx)(n.li,{children:"More sophisticated stage orchestration patterns"}),"\n"]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"required-fields",children:"Required fields"}),"\n",(0,i.jsx)(n.p,{children:"Each stage must define:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"name"})," (optional): A unique identifier - if not provided, it will be auto-derived from the location"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"location"}),": The package or directory where changes are located"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"stage-fields",children:"Stage fields"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Field"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"location"})}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{children:"Package or directory scanned for both code-based and template-based changes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"name"})}),(0,i.jsx)(n.td,{children:"\u274c"}),(0,i.jsx)(n.td,{children:"Unique identifier for the stage (auto-derived from location if not provided)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"description"})}),(0,i.jsx)(n.td,{children:"\u274c"}),(0,i.jsx)(n.td,{children:"Optional text explaining the stage's purpose"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"where-changes-are-located",children:"Where Changes are located"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"location"})})," refers to a source package (e.g., ",(0,i.jsx)(n.code,{children:"com.company.changes"}),"), a relative(e.g., ",(0,i.jsx)(n.code,{children:"my/path/changes"}),") or absolute(e.g., ",(0,i.jsx)(n.code,{children:"/my/path/changes"}),") resources directory."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Template-based and code-based changes can co-exist if location is a source package."}),"\n",(0,i.jsx)(n.li,{children:"If location references a resource directory, it only accepts template-based changeUnits."}),"\n",(0,i.jsxs)(n.li,{children:["Default source roots: ",(0,i.jsx)(n.code,{children:"src/main/java"}),", ",(0,i.jsx)(n.code,{children:"src/main/kotlin"}),", ",(0,i.jsx)(n.code,{children:"src/main/scala"}),", ",(0,i.jsx)(n.code,{children:"src/main/groovy"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Source root can be customized via the ",(0,i.jsx)(n.code,{children:"sources"})," compiler option."]}),"\n",(0,i.jsxs)(n.li,{children:["Resource root can be customized via the ",(0,i.jsx)(n.code,{children:"resources"})," compiler option."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Customizing Source and Resource Root Paths"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.A,{groupId:"gradle_maven",children:[(0,i.jsx)(l.A,{value:"gradle",label:"Gradle",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:'tasks.withType<JavaCompile> {\n    options.compilerArgs.addAll(listOf(\n        "-Asources=custom/src",\n        "-Aresources=custom/resources"\n    ))\n}\n'})})}),(0,i.jsx)(l.A,{value:"maven",label:"Maven",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<build>\n  <plugins>\n    <plugin>\n      <artifactId>maven-compiler-plugin</artifactId>\n      <configuration>\n        <compilerArgs>\n          <arg>-Asources=custom/src</arg>\n          <arg>-Aresources=custom/resources</arg>\n        </compilerArgs>\n      </configuration>\n    </plugin>\n  </plugins>\n</build>\n"})})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"example-pipeline",children:"Example Pipeline"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"pipeline:\n  stages:\n    - name: user-setup\n      description: User-related DB setup\n      location: com.yourapp.flamingock.users\n"})}),"\n",(0,i.jsx)(n.p,{children:"Folder view:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"src/\n  main/\n    java/\n      com/\n        yourapp/\n          flamingock/\n            users/\n              _0001_CREATE_USERS_TABLE.java\n              _0002_ADD_INDEX.yaml\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"single-stage-execution-default-and-recommended",children:"Single Stage Execution (default and recommended)"}),"\n",(0,i.jsxs)(n.p,{children:["In most applications, ",(0,i.jsx)(n.strong,{children:"changes that require a specific, deterministic execution order"})," should be grouped into a ",(0,i.jsx)(n.strong,{children:"single stage"}),". This ensures they are applied sequentially and in the exact order they are defined."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@EnableFlamingock(\n    stages = {\n        @Stage(location = "com.yourcompany.changes")\n    }\n)\n'})}),"\n",(0,i.jsx)(n.p,{children:"Grouping related changes into a single stage:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Ensures ",(0,i.jsx)(n.strong,{children:"predictable, sequential execution"})]}),"\n",(0,i.jsx)(n.li,{children:"Avoids ambiguity from cross-stage execution timing"}),"\n",(0,i.jsx)(n.li,{children:"Eliminates the need to manage inter-stage dependencies"}),"\n",(0,i.jsx)(n.li,{children:"Keeps setup simple and easier to maintain"}),"\n",(0,i.jsx)(n.li,{children:"Supports mixing all types of changes (Kafka, MongoDB, SQL, S3, etc.) in a well-defined order"}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{title:"Advanced scenarios",type:"info",children:(0,i.jsxs)(n.p,{children:["If your application benefits from separating changes\u2014for example, by module or lifecycle\u2014you can define ",(0,i.jsx)(n.a,{href:"#multiple-stages-advanced",children:"Multiple Stages (Advanced)"}),". Just remember: deterministic execution is guaranteed only within a stage, not across them."]})}),"\n",(0,i.jsx)(n.h3,{id:"placing-your-changes",children:"Placing your changes"}),"\n",(0,i.jsxs)(n.p,{children:["We strongly recommend placing all your changes \u2014 code-based and template-based \u2014 in a ",(0,i.jsx)(n.strong,{children:"single location"})," defined by the ",(0,i.jsx)(n.code,{children:"@Stage"})," annotation."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ensures changes are always scanned, regardless of type"}),"\n",(0,i.jsx)(n.li,{children:"Avoids needing two locations if one template-based change requires fallback to code"}),"\n",(0,i.jsx)(n.li,{children:"Keeps everything in one logical location"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"naming-convention-for-changes",children:"Naming Convention for Changes"}),"\n",(0,i.jsx)(n.p,{children:"To ensure clarity and enforce ordering, we recommend naming changes using the following format:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"_0001_CREATE_CLIENTS_TABLE.java\n_0002_ADD_INDEX_TO_EMAIL.yaml\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"XXXX"}),": The execution order of the change"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"CHANGE_NAME"}),": Descriptive name of what the change does"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This convention:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Works across both code-based and template-based formats"}),"\n",(0,i.jsx)(n.li,{children:"Makes the execution order obvious at a glance"}),"\n",(0,i.jsx)(n.li,{children:"Ensures consistent naming and project hygiene"}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["While Java typically avoids underscores and leading digits, change units are not traditional classes. Prioritizing ",(0,i.jsx)(n.strong,{children:"readability and order"})," is more valuable in this context."]})}),"\n",(0,i.jsx)(n.h2,{id:"-troubleshooting",children:"\ud83d\udee0 Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"my-stage-isnt-picked-up",children:"My stage isn't picked up"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Make sure the stage has a ",(0,i.jsx)(n.code,{children:"location"})," field defined"]}),"\n",(0,i.jsxs)(n.li,{children:["Check the file path is correct and uses ",(0,i.jsx)(n.code,{children:"/"})," as a separator, not ",(0,i.jsx)(n.code,{children:"."})," in YAML"]}),"\n",(0,i.jsxs)(n.li,{children:["If using resource directory paths, make sure the file is placed under ",(0,i.jsx)(n.code,{children:"src/main/resources/your-dir"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"no-changes-found-in-stage",children:"No changes found in stage"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Verify that the class or YAML file is located in the expected package/directory"}),"\n",(0,i.jsxs)(n.li,{children:["For code-based changes, ensure the class is annotated with ",(0,i.jsx)(n.code,{children:"@Change"})," or ",(0,i.jsx)(n.code,{children:"@ChangeUnit"})]}),"\n",(0,i.jsx)(n.li,{children:"For template-based changes, check file names and YAML formatting"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{})]})}function g(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var a=s(6540);const i={},t=a.createContext(i);function r(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(t.Provider,{value:n},e.children)}},9365:(e,n,s)=>{s.d(n,{A:()=>r});s(6540);var a=s(4164);const i={tabItem:"tabItem_Ymn6"};var t=s(4848);function r({children:e,hidden:n,className:s}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,a.A)(i.tabItem,s),hidden:n,children:e})}}}]);