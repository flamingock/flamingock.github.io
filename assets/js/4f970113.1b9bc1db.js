"use strict";(self.webpackChunkflamingock=self.webpackChunkflamingock||[]).push([[8956],{2323:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>r});const i=JSON.parse('{"id":"templates/template-mapping-section","title":"Template mapping","description":"How Execution and Rollback Mapping Works","source":"@site/docs/templates/template-mapping-section.md","sourceDirName":"templates","slug":"/templates/template-mapping-section","permalink":"/docs/templates/template-mapping-section","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/templates/template-mapping-section.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"title":"Template mapping"},"sidebar":"tutorialSidebar","previous":{"title":"Create your template","permalink":"/docs/templates/create-your-own-template"},"next":{"title":"Spring Boot Introduction","permalink":"/docs/frameworks/springboot-integration/introduction"}}');var o=t(4848),l=t(8453);const s={sidebar_position:10,title:"Template mapping"},c=void 0,a={},r=[{value:"How Execution and Rollback Mapping Works",id:"how-execution-and-rollback-mapping-works",level:3},{value:"Execution",id:"execution",level:4},{value:"Rollback",id:"rollback",level:4}];function d(e){const n={admonition:"admonition",code:"code",h3:"h3",h4:"h4",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h3,{id:"how-execution-and-rollback-mapping-works",children:"How Execution and Rollback Mapping Works"}),"\n",(0,o.jsxs)(n.p,{children:["In a template-based change unit (declarative format), Flamingock uses the ",(0,o.jsx)(n.code,{children:"execution"})," and ",(0,o.jsx)(n.code,{children:"rollback"})," sections to determine which methods to invoke in your template class."]}),"\n",(0,o.jsx)(n.h4,{id:"execution",children:"Execution"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The method annotated with ",(0,o.jsx)(n.code,{children:"@Execution"})," is ",(0,o.jsx)(n.strong,{children:"mandatory"})," for the template developer."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"execution"})," section in the declarative change unit is ",(0,o.jsx)(n.strong,{children:"mandatory"})," for the user."]}),"\n",(0,o.jsxs)(n.li,{children:["If the ",(0,o.jsx)(n.code,{children:"execution"})," section is missing, Flamingock throws an exception at startup."]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"rollback",children:"Rollback"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The method annotated with ",(0,o.jsx)(n.code,{children:"@RollbackExecution"})," is ",(0,o.jsx)(n.strong,{children:"mandatory"})," for the template developer."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"rollback"})," section in the declarative change unit is ",(0,o.jsx)(n.strong,{children:"optional"})," for the user."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"The behavior of rollback varies depending on context:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Rollback during execution failure"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["If the system is ",(0,o.jsx)(n.strong,{children:"transactional"})," (e.g., MySQL), Flamingock relies on the system\u2019s native transaction handling. It will not call the rollback method."]}),"\n",(0,o.jsxs)(n.li,{children:["If the system is ",(0,o.jsx)(n.strong,{children:"non-transactional"}),", Flamingock will:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Attempt to call the ",(0,o.jsx)(n.code,{children:"@RollbackExecution"})," method only if the user provides a ",(0,o.jsx)(n.code,{children:"rollback"})," section in the declarative file."]}),"\n",(0,o.jsxs)(n.li,{children:["If no rollback config is provided, Flamingock skips the method call and logs the change as ",(0,o.jsx)(n.strong,{children:"FAILED"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Rollback during Undo operations (manual reversion)"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["If a ",(0,o.jsx)(n.code,{children:"rollback"})," section is present in the declarative file, Flamingock will call the ",(0,o.jsx)(n.code,{children:"@RollbackExecution"})," method \u2014 even if the change was previously applied successfully."]}),"\n",(0,o.jsxs)(n.li,{children:["If no ",(0,o.jsx)(n.code,{children:"rollback"})," is provided, Flamingock skips the rollback logic, but still marks the change as ",(0,o.jsx)(n.strong,{children:"ROLLED_BACK"})," in the audit."]}),"\n"]}),"\n",(0,o.jsxs)(n.admonition,{type:"note",children:[(0,o.jsx)(n.mdxAdmonitionTitle,{}),(0,o.jsx)(n.p,{children:"In undo operations, if rollback is not defined in the declarative file, the change is marked as reverted even though no actual rollback was executed. It\u2019s up to the user to ensure reversibility when needed."})]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>c});var i=t(6540);const o={},l=i.createContext(o);function s(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);