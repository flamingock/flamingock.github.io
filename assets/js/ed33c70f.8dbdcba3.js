"use strict";(self.webpackChunkflamingock=self.webpackChunkflamingock||[]).push([[7610],{244:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>g,frontMatter:()=>l,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"target-systems/introduction","title":"Introduction","description":"Target systems are the real-world systems where your business changes are applied.","source":"@site/docs/target-systems/introduction.md","sourceDirName":"target-systems","slug":"/target-systems/introduction","permalink":"/target-systems/introduction","draft":false,"unlisted":false,"editUrl":"https://github.com/flamingock/flamingock-java/docs/target-systems/introduction.md","tags":[],"version":"current","sidebarPosition":0,"frontMatter":{"title":"Introduction","sidebar_position":0},"sidebar":"tutorialSidebar","previous":{"title":"Domain Coupling","permalink":"/changes/domain-coupling"},"next":{"title":"Non transactional","permalink":"/target-systems/non-transactional-target-system"}}');var a=n(4848),r=n(8453),i=n(1470),o=n(9365);const l={title:"Introduction",sidebar_position:0},c="Target systems",d={},h=[{value:"Why target systems matter",id:"why-target-systems-matter",level:2},{value:"Explicit ownership",id:"explicit-ownership",level:3},{value:"Transactionality awareness",id:"transactionality-awareness",level:3},{value:"Dependency isolation",id:"dependency-isolation",level:3},{value:"Target system implementations",id:"target-system-implementations",level:2},{value:"Non-transactional target system",id:"non-transactional-target-system",level:3},{value:"Transactional target systems",id:"transactional-target-systems",level:3},{value:"Target system configuration",id:"target-system-configuration",level:2},{value:"Registering target systems",id:"registering-target-systems",level:2},{value:"Linking Changes to target systems",id:"linking-changes-to-target-systems",level:2},{value:"Dependency injection",id:"dependency-injection",level:2},{value:"Cloud Edition visibility",id:"cloud-edition-visibility",level:2},{value:"Best practices",id:"best-practices",level:2}];function u(e){const t={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"target-systems",children:"Target systems"})}),"\n",(0,a.jsx)(t.p,{children:"Target systems are the real-world systems where your business changes are applied.\nThese include any external service your application interacts with or evolves - message queues, APIs, cloud services, databases, configuration stores, and more. The examples throughout this documentation are illustrative; Flamingock can work with any system your application needs to change."}),"\n",(0,a.jsx)(t.p,{children:"A Change always declares which target system it belongs to. This ensures Flamingock can:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Track and audit changes per system"}),"\n",(0,a.jsx)(t.li,{children:"Guarantee safe execution across heterogeneous environments"}),"\n",(0,a.jsx)(t.li,{children:"Provide clear visibility into which changes affect which systems"}),"\n"]}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Conceptual Overview"}),": For architectural understanding of target systems vs audit store, see ",(0,a.jsx)(t.a,{href:"/get-started/audit-store-vs-target-system",children:"Target Systems vs Audit Store"}),"."]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"why-target-systems-matter",children:"Why target systems matter"}),"\n",(0,a.jsx)(t.h3,{id:"explicit-ownership",children:"Explicit ownership"}),"\n",(0,a.jsx)(t.p,{children:"Every change is tied to a named target system, avoiding ambiguity and enabling clear governance."}),"\n",(0,a.jsx)(t.h3,{id:"transactionality-awareness",children:"Transactionality awareness"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Transactional target systems"})," (like PostgreSQL, MySQL, or MongoDB with transactions) allow Flamingock to use native rollback and guarantees."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Non-transactional systems"})," (like S3, Kafka, or REST APIs) are still safe, but Flamingock relies on rollback methods you provide."]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"This distinction is built into the target system definition."}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsxs)(t.p,{children:["For detailed information on transaction handling, see ",(0,a.jsx)(t.a,{href:"/changes/transactions",children:"Transactions"}),"."]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"dependency-isolation",children:"Dependency isolation"}),"\n",(0,a.jsxs)(t.p,{children:["Each target system provides its own dependency context, ensuring ",(0,a.jsx)(t.strong,{children:"target system isolation"}),". This means each system has its own set of dependencies that are isolated from other target systems, providing clear boundaries and preventing dependency conflicts between different systems, while still supporting global dependency injection as a fallback."]}),"\n",(0,a.jsx)(t.p,{children:"This isolation enables:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Clear ownership of dependencies per target system"}),"\n",(0,a.jsx)(t.li,{children:"Prevention of cross-system dependency conflicts"}),"\n",(0,a.jsx)(t.li,{children:"Easier testing and debugging of system-specific changes"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"target-system-implementations",children:"Target system implementations"}),"\n",(0,a.jsxs)(t.p,{children:["Flamingock provides target system implementations to handle specific behavior when needed. While most external systems work perfectly with the standard ",(0,a.jsx)(t.code,{children:"NonTransactionalTargetSystem"}),", concrete implementations exist primarily to leverage native capabilities like transaction support. As the ecosystem evolves, new implementations may be added by the Flamingock team, community, or even custom-built by users - though custom implementations are rarely necessary."]}),"\n",(0,a.jsx)(t.h3,{id:"non-transactional-target-system",children:"Non-transactional target system"}),"\n",(0,a.jsx)(t.p,{children:"The standard choice for systems without native transaction support:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"/target-systems/non-transactional-target-system",children:"Non-transactional target system"})," - For Kafka, S3, REST APIs, feature flags, file systems, and any other non-transactional system"]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"transactional-target-systems",children:"Transactional target systems"}),"\n",(0,a.jsx)(t.p,{children:"These implementations leverage native transaction capabilities for automatic rollback:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"/target-systems/mongodb-target-system",children:"MongoDB target system"})," - For MongoDB with the sync driver"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"/target-systems/mongodb-springdata-target-system",children:"MongoDB Spring Data target system"})," - For MongoDB with Spring Data"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"/target-systems/sql-target-system",children:"SQL target system"})," - For relational databases (PostgreSQL, MySQL, etc.)"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"/target-systems/dynamodb-target-system",children:"DynamoDB target system"})," - For Amazon DynamoDB"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"/target-systems/couchbase-target-system",children:"Couchbase target system"})," - For Couchbase"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"target-system-configuration",children:"Target system configuration"}),"\n",(0,a.jsxs)(t.p,{children:["Target systems are configured using a ",(0,a.jsx)(t.strong,{children:"strict, no-fallback approach"})," with explicit parameters:"]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Mandatory configuration"}),": Provided through constructor parameters only"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Must be provided at target system creation time"}),"\n",(0,a.jsx)(t.li,{children:"No fallback to global context"}),"\n",(0,a.jsxs)(t.li,{children:["Example: ",(0,a.jsx)(t.code,{children:"MongoClient"})," and ",(0,a.jsx)(t.code,{children:"databaseName"})," for MongoDB target systems"]}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Optional configuration"}),": Provided through ",(0,a.jsx)(t.code,{children:".withXXX()"})," methods only"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"No fallback to global context"}),"\n",(0,a.jsx)(t.li,{children:"Uses sensible defaults if not provided"}),"\n",(0,a.jsxs)(t.li,{children:["Example: ",(0,a.jsx)(t.code,{children:"WriteConcern"}),", connection pool settings"]}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'// Mandatory configuration via constructor\nvar mongoTarget = new MongoDBSyncTargetSystem("targetsystem-id", mongoClient, "userDatabase");\n\n// Optional configuration via .withXXX() methods\nmongoTarget.withWriteConcern(WriteConcern.MAJORITY)\n           .withConnectionTimeout(5000);\n'})}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"No global context fallback"})," - target system configuration must be explicit and complete."]}),"\n",(0,a.jsx)(t.h2,{id:"registering-target-systems",children:"Registering target systems"}),"\n",(0,a.jsx)(t.p,{children:"Target systems are registered at runtime. You can define and register as many as you need:"}),"\n",(0,a.jsxs)(i.A,{groupId:"registration",children:[(0,a.jsxs)(o.A,{value:"builder",label:"Flamingock Builder",default:!0,children:[(0,a.jsx)(t.p,{children:"Use the Flamingock builder for standalone applications:"}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'var mysql = new SqlTargetSystem("mysql-inventory-id", dataSource);\n\nvar s3 = new NonTransactionalTargetSystem("aws-s3-id");\n\nvar kafka = new NonTransactionalTargetSystem("kafka-stock-id");\n\nFlamingock.builder()\n    .setAuditStore(new MongoDBSyncAuditStore(mongoClient, mongoDatabase))\n    .addTargetSystems(mysql, s3, kafka)\n    .build()\n    .run();\n'})}),(0,a.jsx)(t.p,{children:"At startup, Flamingock automatically injects the right dependencies from the corresponding target system into each Change."})]}),(0,a.jsxs)(o.A,{value:"springboot",label:"Spring Boot",children:[(0,a.jsx)(t.p,{children:"For Spring Boot applications, register target systems as beans:"}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'@Bean\npublic NonTransactionalTargetSystem kafkaTargetSystem() {\n    return new NonTransactionalTargetSystem("kafka-stock-id");\n}\n\n@Bean\npublic SqlTargetSystem sqlTargetSystem(DataSource dataSource) {\n    return new SqlTargetSystem("mysql-inventory-id", dataSource);\n}\n\n@Bean\npublic MongoDBSyncTargetSystem mongoTargetSystem(MongoClient mongoClient) {\n    return new MongoDBSyncTargetSystem("user-database-id", mongoClient, "userDb")\n        .withWriteConcern(WriteConcern.MAJORITY);\n}\n\n'})}),(0,a.jsx)(t.p,{children:"Spring Boot's auto-configuration will automatically register these target systems with Flamingock."}),(0,a.jsxs)(t.p,{children:["For more details, see ",(0,a.jsx)(t.a,{href:"/frameworks/springboot-integration/introduction",children:"Spring Boot Integration"}),"."]})]})]}),"\n",(0,a.jsx)(t.h2,{id:"linking-changes-to-target-systems",children:"Linking Changes to target systems"}),"\n",(0,a.jsxs)(t.p,{children:["When defining Changes, you specify which target system they belong to using the ",(0,a.jsx)(t.code,{children:"@TargetSystem"})," annotation:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'@TargetSystem("mysql-inventory-id")\n@Change(id = "add-category", author = "team")  // order extracted from filename\npublic class _0001__AddCategory {\n    //...\n}\n'})}),"\n",(0,a.jsx)(t.h2,{id:"dependency-injection",children:"Dependency injection"}),"\n",(0,a.jsxs)(t.p,{children:["Dependency injection is the mechanism used for ",(0,a.jsx)(t.strong,{children:"change execution"}),", providing the dependencies that Changes need to perform their operations. Each target system exposes specific dependencies required by its Changes:"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["A MongoDB target system provides a ",(0,a.jsx)(t.code,{children:"MongoDatabase"}),", ",(0,a.jsx)(t.code,{children:"ClientSession"})]}),"\n",(0,a.jsxs)(t.li,{children:["A Kafka target system provides a ",(0,a.jsx)(t.code,{children:"KafkaTemplate"})]}),"\n",(0,a.jsxs)(t.li,{children:["A SQL target system provides a ",(0,a.jsx)(t.code,{children:"Connection"})," or ",(0,a.jsx)(t.code,{children:"DataSource"})]}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["Flamingock uses a ",(0,a.jsx)(t.strong,{children:"flexible, multi-source approach"})," with fallback hierarchy for change execution:"]}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Target system context"})," (highest priority) - includes configuration parameters from constructor + ",(0,a.jsx)(t.code,{children:".withXXX()"})," methods"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Target system additional dependencies"})," - added via ",(0,a.jsx)(t.code,{children:".addDependency()"})," or ",(0,a.jsx)(t.code,{children:".setProperty()"})]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Global context"})," (fallback) - shared dependencies available to all target systems"]}),"\n"]}),"\n",(0,a.jsxs)(t.admonition,{type:"info",children:[(0,a.jsx)(t.mdxAdmonitionTitle,{}),(0,a.jsxs)(t.p,{children:["Target system configuration parameters (from ",(0,a.jsx)(t.strong,{children:"constructor"})," and ",(0,a.jsx)(t.code,{children:".withXXX()"})," methods) are automatically available as change dependencies with highest priority."]})]}),"\n",(0,a.jsxs)(t.p,{children:["For comprehensive details on change dependency resolution, see ",(0,a.jsx)(t.a,{href:"/changes/anatomy-and-structure",children:"Change Anatomy & Structure"}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"cloud-edition-visibility",children:"Cloud Edition visibility"}),"\n",(0,a.jsx)(t.p,{children:"In the Cloud Edition, target systems become a first-class part of the dashboard:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"See all changes grouped by target system"}),"\n",(0,a.jsx)(t.li,{children:"Filter execution history by system"}),"\n",(0,a.jsx)(t.li,{children:"Track failures and recoveries per system"}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"This makes it easier to govern and audit distributed environments at scale."}),"\n",(0,a.jsx)(t.h2,{id:"best-practices",children:"Best practices"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["Use descriptive names (",(0,a.jsx)(t.code,{children:"mysql-inventory"}),", ",(0,a.jsx)(t.code,{children:"aws-s3"}),", ",(0,a.jsx)(t.code,{children:"kafka-stock"}),")"]}),"\n",(0,a.jsx)(t.li,{children:"Be consistent across related Changes"}),"\n",(0,a.jsx)(t.li,{children:'Avoid generic names like "database" or "api"'}),"\n",(0,a.jsx)(t.li,{children:"Provide rollback logic for non-transactional systems"}),"\n",(0,a.jsx)(t.li,{children:"Keep dependencies scoped to the system they belong to \u2014 don\u2019t overload the general context when they are system-specific"}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Key Takeaway"}),": Target systems provide the foundation for safe, auditable changes across your entire technology stack. By explicitly declaring and configuring them, you enable Flamingock to orchestrate complex distributed system evolution with confidence."]})]})}function g(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},1470:(e,t,n)=>{n.d(t,{A:()=>k});var s=n(6540),a=n(4164),r=n(3104),i=n(6347),o=n(205),l=n(7485),c=n(1682),d=n(679);function h(e){return s.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function u(e){const{values:t,children:n}=e;return(0,s.useMemo)(()=>{const e=t??function(e){return h(e).map(({props:{value:e,label:t,attributes:n,default:s}})=>({value:e,label:t,attributes:n,default:s}))}(n);return function(e){const t=(0,c.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[t,n])}function g({value:e,tabValues:t}){return t.some(t=>t.value===e)}function m({queryString:e=!1,groupId:t}){const n=(0,i.W6)(),a=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,l.aZ)(a),(0,s.useCallback)(e=>{if(!a)return;const t=new URLSearchParams(n.location.search);t.set(a,e),n.replace({...n.location,search:t.toString()})},[a,n])]}function y(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,r=u(e),[i,l]=(0,s.useState)(()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!g({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=t.find(e=>e.default)??t[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:r})),[c,h]=m({queryString:n,groupId:a}),[y,p]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,a]=(0,d.Dv)(t);return[n,(0,s.useCallback)(e=>{t&&a.set(e)},[t,a])]}({groupId:a}),x=(()=>{const e=c??y;return g({value:e,tabValues:r})?e:null})();(0,o.A)(()=>{x&&l(x)},[x]);return{selectedValue:i,selectValue:(0,s.useCallback)(e=>{if(!g({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),h(e),p(e)},[h,p,r]),tabValues:r}}var p=n(2303);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=n(4848);function j({className:e,block:t,selectedValue:n,selectValue:s,tabValues:i}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,r.a_)(),c=e=>{const t=e.currentTarget,a=o.indexOf(t),r=i[a].value;r!==n&&(l(t),s(r))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=o.indexOf(e.currentTarget)+1;t=o[n]??o[0];break}case"ArrowLeft":{const n=o.indexOf(e.currentTarget)-1;t=o[n]??o[o.length-1];break}}t?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},e),children:i.map(({value:e,label:t,attributes:s})=>(0,f.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{o.push(e)},onKeyDown:d,onClick:c,...s,className:(0,a.A)("tabs__item",x.tabItem,s?.className,{"tabs__item--active":n===e}),children:t??e},e))})}function b({lazy:e,children:t,selectedValue:n}){const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=r.find(e=>e.props.value===n);return e?(0,s.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:r.map((e,t)=>(0,s.cloneElement)(e,{key:t,hidden:e.props.value!==n}))})}function v(e){const t=y(e);return(0,f.jsxs)("div",{className:(0,a.A)("tabs-container",x.tabList),children:[(0,f.jsx)(j,{...t,...e}),(0,f.jsx)(b,{...t,...e})]})}function k(e){const t=(0,p.A)();return(0,f.jsx)(v,{...e,children:h(e.children)},String(t))}},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>o});var s=n(6540);const a={},r=s.createContext(a);function i(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(r.Provider,{value:t},e.children)}},9365:(e,t,n)=>{n.d(t,{A:()=>i});n(6540);var s=n(4164);const a={tabItem:"tabItem_Ymn6"};var r=n(4848);function i({children:e,hidden:t,className:n}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,s.A)(a.tabItem,n),hidden:t,children:e})}}}]);