"use strict";(self.webpackChunkflamingock=self.webpackChunkflamingock||[]).push([[8956],{2323:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>r});const i=JSON.parse('{"id":"templates/template-mapping-section","title":"Template mapping","description":"How Execution and Rollback Mapping Works","source":"@site/docs/templates/template-mapping-section.md","sourceDirName":"templates","slug":"/templates/template-mapping-section","permalink":"/docs/templates/template-mapping-section","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/templates/template-mapping-section.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"title":"Template mapping"},"sidebar":"tutorialSidebar","previous":{"title":"Create your template","permalink":"/docs/templates/create-your-own-template"},"next":{"title":"Spring Boot Introduction","permalink":"/docs/frameworks/springboot-integration/introduction"}}');var o=t(4848),s=t(8453);const l={sidebar_position:10,title:"Template mapping"},a=void 0,c={},r=[{value:"How Execution and Rollback Mapping Works",id:"how-execution-and-rollback-mapping-works",level:3},{value:"Execution",id:"execution",level:4},{value:"Rollback",id:"rollback",level:4}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h3:"h3",h4:"h4",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h3,{id:"how-execution-and-rollback-mapping-works",children:"How Execution and Rollback Mapping Works"}),"\n",(0,o.jsxs)(n.p,{children:["In a template-based change unit (declarative format), Flamingock uses the ",(0,o.jsx)(n.code,{children:"execution"})," and ",(0,o.jsx)(n.code,{children:"rollback"})," sections to determine which methods to invoke in your template class."]}),"\n",(0,o.jsx)(n.h4,{id:"execution",children:"Execution"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The method annotated with ",(0,o.jsx)(n.code,{children:"@Execution"})," is ",(0,o.jsx)(n.strong,{children:"mandatory"})," for the template developer."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"execution"})," section in the declarative change unit is ",(0,o.jsx)(n.strong,{children:"mandatory"})," for the user."]}),"\n",(0,o.jsxs)(n.li,{children:["If the ",(0,o.jsx)(n.code,{children:"execution"})," section is missing, Flamingock throws an exception at startup."]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"rollback",children:"Rollback"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The method annotated with ",(0,o.jsx)(n.code,{children:"@RollbackExecution"})," is ",(0,o.jsx)(n.strong,{children:"mandatory"})," for the template developer."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"rollback"})," section in the declarative change unit is ",(0,o.jsx)(n.strong,{children:"optional"})," for the user."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["The behavior of rollback varies depending on the target system capabilities and the ",(0,o.jsx)(n.code,{children:"transactional"})," flag:"]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["For detailed information on transaction behavior, see ",(0,o.jsx)(n.a,{href:"/docs/flamingock-library-config/transactions",children:"Transactions"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Rollback during execution failure"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"For transactional target systems"})," (e.g., MySQL, PostgreSQL, MongoDB):"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsxs)(n.strong,{children:["With ",(0,o.jsx)(n.code,{children:"transactional = true"})," (default)"]}),": Flamingock relies on the system's native transaction handling for automatic rollback. The ",(0,o.jsx)(n.code,{children:"@RollbackExecution"})," method is NOT called."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsxs)(n.strong,{children:["With ",(0,o.jsx)(n.code,{children:"transactional = false"})]}),": Flamingock will call the ",(0,o.jsx)(n.code,{children:"@RollbackExecution"})," method if the user provides a ",(0,o.jsx)(n.code,{children:"rollback"})," section in the declarative file."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"For non-transactional target systems"})," (e.g., Kafka, S3, REST APIs):"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsxs)(n.strong,{children:["The ",(0,o.jsx)(n.code,{children:"transactional"})," flag is ignored"]})," - behavior is always the same:"]}),"\n",(0,o.jsxs)(n.li,{children:["Flamingock will call the ",(0,o.jsx)(n.code,{children:"@RollbackExecution"})," method if the user provides a ",(0,o.jsx)(n.code,{children:"rollback"})," section in the declarative file."]}),"\n",(0,o.jsxs)(n.li,{children:["If no rollback config is provided, Flamingock skips the method call and logs the change as ",(0,o.jsx)(n.strong,{children:"FAILED"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Rollback during Undo operations (manual reversion via CLI)"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["If a ",(0,o.jsx)(n.code,{children:"rollback"})," section is present in the declarative file, Flamingock will call the ",(0,o.jsx)(n.code,{children:"@RollbackExecution"})," method regardless of target system type."]}),"\n",(0,o.jsxs)(n.li,{children:["If no ",(0,o.jsx)(n.code,{children:"rollback"})," is provided, Flamingock skips the rollback logic, but still marks the change as ",(0,o.jsx)(n.strong,{children:"ROLLED_BACK"})," in the audit."]}),"\n"]}),"\n",(0,o.jsxs)(n.admonition,{type:"note",children:[(0,o.jsx)(n.mdxAdmonitionTitle,{}),(0,o.jsx)(n.p,{children:"In undo operations, if rollback is not defined in the declarative file, the change is marked as reverted even though no actual rollback was executed. It\u2019s up to the user to ensure reversibility when needed."})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>a});var i=t(6540);const o={},s=i.createContext(o);function l(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);