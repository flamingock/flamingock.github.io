"use strict";(self.webpackChunkflamingock=self.webpackChunkflamingock||[]).push([[8149],{1470:(e,n,t)=>{t.d(n,{A:()=>w});var i=t(6540),r=t(4164),a=t(7559),o=t(3104),s=t(6347),l=t(205),c=t(7485),u=t(1682),d=t(679);function p(e){return i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function g(e){const{values:n,children:t}=e;return(0,i.useMemo)(()=>{const e=n??function(e){return p(e).map(({props:{value:e,label:n,attributes:t,default:i}})=>({value:e,label:n,attributes:t,default:i}))}(t);return function(e){const n=(0,u.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,t])}function h({value:e,tabValues:n}){return n.some(n=>n.value===e)}function m({queryString:e=!1,groupId:n}){const t=(0,s.W6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(r),(0,i.useCallback)(e=>{if(!r)return;const n=new URLSearchParams(t.location.search);n.set(r,e),t.replace({...t.location,search:n.toString()})},[r,t])]}function f(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,a=g(e),[o,s]=(0,i.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!h({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find(e=>e.default)??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:a})),[c,u]=m({queryString:t,groupId:r}),[p,f]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,r]=(0,d.Dv)(n);return[t,(0,i.useCallback)(e=>{n&&r.set(e)},[n,r])]}({groupId:r}),b=(()=>{const e=c??p;return h({value:e,tabValues:a})?e:null})();(0,l.A)(()=>{b&&s(b)},[b]);return{selectedValue:o,selectValue:(0,i.useCallback)(e=>{if(!h({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),f(e)},[u,f,a]),tabValues:a}}var b=t(2303);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=t(4848);function j({className:e,block:n,selectedValue:t,selectValue:i,tabValues:a}){const s=[],{blockElementScrollPositionUntilNextRender:l}=(0,o.a_)(),c=e=>{const n=e.currentTarget,r=s.indexOf(n),o=a[r].value;o!==t&&(l(n),i(o))},u=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=s.indexOf(e.currentTarget)+1;n=s[t]??s[0];break}case"ArrowLeft":{const t=s.indexOf(e.currentTarget)-1;n=s[t]??s[s.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},e),children:a.map(({value:e,label:n,attributes:i})=>(0,x.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{s.push(e)},onKeyDown:u,onClick:c,...i,className:(0,r.A)("tabs__item",v.tabItem,i?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function y({lazy:e,children:n,selectedValue:t}){const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=a.find(e=>e.props.value===t);return e?(0,i.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:a.map((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function k(e){const n=f(e);return(0,x.jsxs)("div",{className:(0,r.A)(a.G.tabs.container,"tabs-container",v.tabList),children:[(0,x.jsx)(j,{...n,...e}),(0,x.jsx)(y,{...n,...e})]})}function w(e){const n=(0,b.A)();return(0,x.jsx)(k,{...e,children:p(e.children)},String(n))}},8182:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>c,default:()=>g,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"frameworks/springboot-integration/enable-flamingock-setup","title":"Automatic Setup","description":"Flamingock provides a convenient automatic integration with Spring Boot using the @Flamingock annotation. This setup is ideal when you want Flamingock to automatically detect and wire required components without writing explicit builder logic.","source":"@site/docs/frameworks/springboot-integration/enable-flamingock-setup.md","sourceDirName":"frameworks/springboot-integration","slug":"/frameworks/springboot-integration/enable-flamingock-setup","permalink":"/frameworks/springboot-integration/enable-flamingock-setup","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Automatic Setup","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Introduction","permalink":"/frameworks/springboot-integration/introduction"},"next":{"title":"Builder-based (manual)","permalink":"/frameworks/springboot-integration/builder-based-setup"}}');var r=t(4848),a=t(8453),o=t(1470),s=t(9365);const l={title:"Automatic Setup",sidebar_position:2},c="Automatic Setup",u={},d=[{value:"Import the springboot integration library",id:"import-the-springboot-integration-library",level:2},{value:"Configure setup and activate integration",id:"configure-setup-and-activate-integration",level:2},{value:"Bean registration requirements",id:"bean-registration-requirements",level:2},{value:"Providing configuration",id:"providing-configuration",level:2},{value:"Next steps",id:"next-steps",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"automatic-setup",children:"Automatic Setup"})}),"\n",(0,r.jsxs)(n.p,{children:["Flamingock provides a convenient automatic integration with Spring Boot using the ",(0,r.jsx)(n.code,{children:"@Flamingock"})," annotation. This setup is ideal when you want Flamingock to automatically detect and wire required components without writing explicit builder logic."]}),"\n",(0,r.jsx)(n.h2,{id:"import-the-springboot-integration-library",children:"Import the springboot integration library"}),"\n",(0,r.jsx)(n.p,{children:"Add the Flamingock Spring Boot integration dependency:"}),"\n",(0,r.jsxs)(o.A,{groupId:"gradle_maven",children:[(0,r.jsx)(s.A,{value:"gradle",label:"Gradle",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'plugins {\n    id("io.flamingock") version "$version"\n}\n\nflamingock {\n    community()\n    springboot()\n}\n'})})}),(0,r.jsx)(s.A,{value:"maven",label:"Maven",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>io.flamingock</groupId>\n    <artifactId>flamingock-springboot-integration</artifactId>\n    <version>${flamingock.version}</version>\n</dependency>\n"})})})]}),"\n",(0,r.jsx)(n.h2,{id:"configure-setup-and-activate-integration",children:"Configure setup and activate integration"}),"\n",(0,r.jsxs)(n.p,{children:["To activate the integration, add ",(0,r.jsx)(n.code,{children:"@EnableFlamingock"})," to any class in your application (commonly on your main class or a configuration class):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@EnableFlamingock(\n    stages = {\n        @Stage(location = "com.yourapp.changes")\n    }\n)\n@SpringBootApplication\npublic class MyApplication {\n  public static void main(String[] args) {\n    SpringApplication.run(MyApplication.class, args);\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@EnableFlamingock"})," annotation enables automatic Spring Boot integration, which:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Detect and use Spring\u2019s ",(0,r.jsx)(n.code,{children:"ApplicationContext"})," and ",(0,r.jsx)(n.code,{children:"ApplicationEventPublisher"})]}),"\n",(0,r.jsx)(n.li,{children:"Loads Flamingock configuration directly from your Spring Boot config file"}),"\n",(0,r.jsx)(n.li,{children:"Automatically configures the runner (e.g., ApplicationRunner or InitializingBean)"}),"\n",(0,r.jsx)(n.li,{children:"Processes the setup configuration from the annotation"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"bean-registration-requirements",children:"Bean registration requirements"}),"\n",(0,r.jsx)(n.p,{children:"With automatic setup, Flamingock needs access to your target systems and (for Community Edition) audit stores. Since these aren't configured directly via the builder, they must be registered as Spring beans:"}),"\n",(0,r.jsx)(n.p,{children:"Example target system bean registration:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Bean\npublic NonTransactionalTargetSystem redisTargetSystem() {\n    return new NonTransactionalTargetSystem("redis-cache-id");\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Flamingock will automatically detect and use these beans during execution."}),"\n",(0,r.jsx)(n.h2,{id:"providing-configuration",children:"Providing configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Runtime configuration is defined using standard Spring Boot configuration files. Use the ",(0,r.jsx)(n.code,{children:"flamingock"})," section for all core and edition-specific options."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"flamingock:\n  lockAcquiredForMillis: 1200\n  runnerType: InitializingBean\n  # other configuration...\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["If the ",(0,r.jsx)(n.code,{children:"runnerType"})," property is not provided, Flamingock defaults to using ",(0,r.jsx)(n.code,{children:"ApplicationRunner"}),"."]})}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Want full control over the builder? See ",(0,r.jsx)(n.a,{href:"/frameworks/springboot-integration/builder-based-setup",children:"Builder-based setup"})]}),"\n",(0,r.jsxs)(n.li,{children:["Explore ",(0,r.jsx)(n.a,{href:"/frameworks/springboot-integration/profiles",children:"Spring Boot profile support"})]}),"\n",(0,r.jsxs)(n.li,{children:["Learn about ",(0,r.jsx)(n.a,{href:"/flamingock-library-config/events",children:"Flamingock lifecycle events"})]}),"\n"]})]})}function g(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>s});var i=t(6540);const r={},a=i.createContext(r);function o(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(a.Provider,{value:n},e.children)}},9365:(e,n,t)=>{t.d(n,{A:()=>o});t(6540);var i=t(4164);const r={tabItem:"tabItem_Ymn6"};var a=t(4848);function o({children:e,hidden:n,className:t}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,i.A)(r.tabItem,t),hidden:n,children:e})}}}]);