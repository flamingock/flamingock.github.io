"use strict";(self.webpackChunkflamingock=self.webpackChunkflamingock||[]).push([[3667],{1470:(e,n,i)=>{i.d(n,{A:()=>k});var t=i(6540),r=i(4164),a=i(7559),s=i(3104),o=i(6347),l=i(205),c=i(7485),u=i(1682),d=i(679);function h(e){return t.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:i}=e;return(0,t.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:i,default:t}})=>({value:e,label:n,attributes:i,default:t}))}(i);return function(e){const n=(0,u.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,i])}function g({value:e,tabValues:n}){return n.some(n=>n.value===e)}function m({queryString:e=!1,groupId:n}){const i=(0,o.W6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(r),(0,t.useCallback)(e=>{if(!r)return;const n=new URLSearchParams(i.location.search);n.set(r,e),i.replace({...i.location,search:n.toString()})},[r,i])]}function f(e){const{defaultValue:n,queryString:i=!1,groupId:r}=e,a=p(e),[s,o]=(0,t.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!g({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const i=n.find(e=>e.default)??n[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:a})),[c,u]=m({queryString:i,groupId:r}),[h,f]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[i,r]=(0,d.Dv)(n);return[i,(0,t.useCallback)(e=>{n&&r.set(e)},[n,r])]}({groupId:r}),x=(()=>{const e=c??h;return g({value:e,tabValues:a})?e:null})();(0,l.A)(()=>{x&&o(x)},[x]);return{selectedValue:s,selectValue:(0,t.useCallback)(e=>{if(!g({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),f(e)},[u,f,a]),tabValues:a}}var x=i(2303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=i(4848);function v({className:e,block:n,selectedValue:i,selectValue:t,tabValues:a}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,s.a_)(),c=e=>{const n=e.currentTarget,r=o.indexOf(n),s=a[r].value;s!==i&&(l(n),t(s))},u=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const i=o.indexOf(e.currentTarget)+1;n=o[i]??o[0];break}case"ArrowLeft":{const i=o.indexOf(e.currentTarget)-1;n=o[i]??o[o.length-1];break}}n?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},e),children:a.map(({value:e,label:n,attributes:t})=>(0,j.jsx)("li",{role:"tab",tabIndex:i===e?0:-1,"aria-selected":i===e,ref:e=>{o.push(e)},onKeyDown:u,onClick:c,...t,className:(0,r.A)("tabs__item",b.tabItem,t?.className,{"tabs__item--active":i===e}),children:n??e},e))})}function y({lazy:e,children:n,selectedValue:i}){const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=a.find(e=>e.props.value===i);return e?(0,t.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:a.map((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==i}))})}function w(e){const n=f(e);return(0,j.jsxs)("div",{className:(0,r.A)(a.G.tabs.container,"tabs-container",b.tabList),children:[(0,j.jsx)(v,{...n,...e}),(0,j.jsx)(y,{...n,...e})]})}function k(e){const n=(0,x.A)();return(0,j.jsx)(w,{...e,children:h(e.children)},String(n))}},7526:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>u,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"frameworks/springboot-integration/introduction","title":"Introduction","description":"Flamingock integrates seamlessly with Spring Boot, offering a powerful and flexible setup for managing your change units in Spring-based applications.","source":"@site/docs/frameworks/springboot-integration/introduction.md","sourceDirName":"frameworks/springboot-integration","slug":"/frameworks/springboot-integration/introduction","permalink":"/frameworks/springboot-integration/introduction","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Introduction","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Create your template","permalink":"/templates/create-your-own-template"},"next":{"title":"Automatic Setup","permalink":"/frameworks/springboot-integration/enable-flamingock-setup"}}');var r=i(4848),a=i(8453),s=i(1470),o=i(9365);const l={title:"Introduction",sidebar_position:1},c="Spring Boot integration",u={},d=[{value:"Why integrate Flamingock with Spring Boot?",id:"why-integrate-flamingock-with-spring-boot",level:2},{value:"Two setup approaches",id:"two-setup-approaches",level:2},{value:"Builder-based setup (manual)",id:"builder-based-setup-manual",level:3},{value:"Automatic setup",id:"automatic-setup",level:3},{value:"Runner strategy: ApplicationRunner vs InitializingBean",id:"runner-strategy-applicationrunner-vs-initializingbean",level:2},{value:"Comparison",id:"comparison",level:3},{value:"Startup failure behavior",id:"startup-failure-behavior",level:3},{value:"Dependency",id:"dependency",level:2},{value:"\u2705 Best practices",id:"white_check_mark-best-practices",level:2}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"spring-boot-integration",children:"Spring Boot integration"})}),"\n",(0,r.jsx)(n.p,{children:"Flamingock integrates seamlessly with Spring Boot, offering a powerful and flexible setup for managing your change units in Spring-based applications."}),"\n",(0,r.jsx)(n.p,{children:"This integration leverages Spring Boot\u2019s features\u2014such as dependency injection, profiles, event publishing, and property configuration\u2014to provide a streamlined and production-ready experience."}),"\n",(0,r.jsx)(n.h2,{id:"why-integrate-flamingock-with-spring-boot",children:"Why integrate Flamingock with Spring Boot?"}),"\n",(0,r.jsx)(n.p,{children:"Using Flamingock with Spring Boot allows you to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Inject Spring-managed beans directly into change units"}),"\n",(0,r.jsx)(n.li,{children:"Configure Flamingock via Spring Boot's native configuration files"}),"\n",(0,r.jsx)(n.li,{children:"Use Spring profiles to control when specific change units run"}),"\n",(0,r.jsxs)(n.li,{children:["Receive execution lifecycle events using ",(0,r.jsx)(n.code,{children:"ApplicationEventPublisher"})]}),"\n",(0,r.jsxs)(n.li,{children:["Choose between Spring Boot lifecycle hooks (",(0,r.jsx)(n.code,{children:"ApplicationRunner"})," or ",(0,r.jsx)(n.code,{children:"InitializingBean"}),") to run Flamingock."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"two-setup-approaches",children:"Two setup approaches"}),"\n",(0,r.jsxs)(n.p,{children:["Flamingock offers ",(0,r.jsx)(n.strong,{children:"two ways to integrate with Spring Boot"}),", depending on how much control you want over the configuration and lifecycle."]}),"\n",(0,r.jsx)(n.h3,{id:"builder-based-setup-manual",children:"Builder-based setup (manual)"}),"\n",(0,r.jsxs)(n.p,{children:["This approach gives you full control and uses the standard Flamingock builder with ",(0,r.jsx)(n.code,{children:"@EnableFlamingock(setup = SetupType.BUILDER)"}),".\nYou manually inject the required Spring Boot components(ApplicationContext and ApplicationEventPublisher) as well as any Flamingock core configuration."]}),"\n",(0,r.jsx)(n.p,{children:"In addition, you can register other dependencies manually \u2014 these will take precedence over beans from the Spring context when resolving what to inject into change units."}),"\n",(0,r.jsx)(n.p,{children:"This is recommended for advanced users or highly customized environments."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["See: ",(0,r.jsx)(n.a,{href:"/frameworks/springboot-integration/builder-based-setup",children:"Builder-based setup"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"automatic-setup",children:"Automatic setup"}),"\n",(0,r.jsxs)(n.p,{children:["This is the simplest way to enable Flamingock in Spring Boot.\nJust annotate any class with ",(0,r.jsx)(n.code,{children:"@EnableFlamingock"})," (commonly your main application class), and Flamingock will:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Auto-detect the application context and event publisher"}),"\n",(0,r.jsx)(n.li,{children:"Read configuration from Spring Boot config files"}),"\n",(0,r.jsxs)(n.li,{children:["Automatically wire the ",(0,r.jsx)(n.code,{children:"FlamingockRunner"})," bean"]}),"\n",(0,r.jsx)(n.li,{children:"Process the setup configuration from the annotation"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Ideal for most users who prefer convention over configuration."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["See: ",(0,r.jsx)(n.a,{href:"/frameworks/springboot-integration/enable-flamingock-setup",children:"Automatic setup"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"runner-strategy-applicationrunner-vs-initializingbean",children:"Runner strategy: ApplicationRunner vs InitializingBean"}),"\n",(0,r.jsxs)(n.p,{children:["Flamingock supports two strategies for executing its process during Spring Boot startup. You can control this via the ",(0,r.jsx)(n.code,{children:"runnerType"})," property in your Spring configuration (",(0,r.jsx)(n.code,{children:"flamingock.runnerType"}),"), or programmatically if using the manual builder."]}),"\n",(0,r.jsx)(n.h3,{id:"comparison",children:"Comparison"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.code,{children:"ApplicationRunner"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.code,{children:"InitializingBean"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Phase"})}),(0,r.jsx)(n.td,{children:"After all beans are initialized \u2014 just before the app is marked as started"}),(0,r.jsx)(n.td,{children:"During bean initialization \u2014 before the app is considered started"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Context availability"})}),(0,r.jsx)(n.td,{children:"\u2705 Full \u2014 all Spring beans and profiles available"}),(0,r.jsx)(n.td,{children:"\u26a0\ufe0f Limited \u2014 not all beans may be available"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Typical use case"})}),(0,r.jsx)(n.td,{children:"Most common \u2014 recommended for production environments"}),(0,r.jsx)(n.td,{children:"For lightweight internal logic or strict startup ordering"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Events fully supported?"})}),(0,r.jsx)(n.td,{children:"\u2705 Yes"}),(0,r.jsx)(n.td,{children:"\u26a0\ufe0f Risky \u2014 context may not be fully ready"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Spring beans available in change units"})}),(0,r.jsx)(n.td,{children:"\u2705 Yes"}),(0,r.jsx)(n.td,{children:"\u26a0\ufe0f May fail or be incomplete"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"startup-failure-behavior",children:"Startup failure behavior"}),"\n",(0,r.jsxs)(n.p,{children:["If Flamingock encounters an error during execution \u2014 whether using ",(0,r.jsx)(n.code,{children:"ApplicationRunner"})," or ",(0,r.jsx)(n.code,{children:"InitializingBean"})," \u2014 the Spring Boot application ",(0,r.jsx)(n.strong,{children:"will fail to start"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["This is intentional: Flamingock runs before the application is marked as ready. In deployment platforms such as ",(0,r.jsx)(n.strong,{children:"Kubernetes"}),", a failure at this stage will:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Prevent the container from reaching a ",(0,r.jsx)(n.em,{children:"Ready"})," state"]}),"\n",(0,r.jsx)(n.li,{children:"Trigger restart policies, health checks, or rollbacks as configured"}),"\n",(0,r.jsx)(n.li,{children:"Ensure that the system is never exposed in a partially initialized or inconsistent state"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This behavior ensures your application only starts when all change units have been applied successfully."}),"\n",(0,r.jsx)(n.h2,{id:"dependency",children:"Dependency"}),"\n",(0,r.jsx)(n.p,{children:"To use the Spring Boot integration, add the following dependency:"}),"\n",(0,r.jsxs)(s.A,{groupId:"gradle_maven",children:[(0,r.jsx)(o.A,{value:"gradle",label:"Gradle",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'plugins {\n    id("io.flamingock") version "[VERSION]"\n}\n\nflamingock {\n    community()\n    springboot()\n}\n'})})}),(0,r.jsx)(o.A,{value:"maven",label:"Maven",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>io.flamingock</groupId>\n    <artifactId>flamingock-springboot-integration</artifactId>\n    <version>${flamingock.version}</version>\n</dependency>\n"})})})]}),"\n",(0,r.jsx)(n.p,{children:"Flamingock's Spring Boot integration is compatible with both Spring Boot 2.x and 3.x."}),"\n",(0,r.jsxs)(n.h2,{id:"white_check_mark-best-practices",children:["\u2705"," Best practices"]}),"\n",(0,r.jsx)(n.p,{children:"Consider the following recommendations to get the most out of Flamingock\u2019s Spring Boot integration:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.strong,{children:["Prefer ",(0,r.jsx)(n.code,{children:"ApplicationRunner"})," as your runner strategy"]}),"\nIt ensures Flamingock runs after the application context is fully initialized, giving it access to all beans, profiles, and configuration. It also integrates more safely with event publishing and external monitoring tools like Actuator or Prometheus."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use automatic setup for simpler setups"}),"\nUnless you have advanced needs (such as injecting non-Spring-managed dependencies), the automatic setup provides a clean and reliable integration path."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use Spring profiles to scope change units"}),"\nProfiles let you control when specific change units execute, avoiding the need for environment-specific pipelines."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Avoid manual execution unless absolutely necessary"}),"\nLetting Spring handle the execution via ",(0,r.jsx)(n.code,{children:"ApplicationRunner"})," or ",(0,r.jsx)(n.code,{children:"InitializingBean"})," ensures Flamingock runs at the appropriate time in your application lifecycle."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.strong,{children:["Register custom platform components using ",(0,r.jsx)(n.code,{children:".addDependency(...)"})," only when required"]}),"\nMost applications using automatic setup will not need to register components manually."]}),"\n"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>o});var t=i(6540);const r={},a=t.createContext(r);function s(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(a.Provider,{value:n},e.children)}},9365:(e,n,i)=>{i.d(n,{A:()=>s});i(6540);var t=i(4164);const r={tabItem:"tabItem_Ymn6"};var a=i(4848);function s({children:e,hidden:n,className:i}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,t.A)(r.tabItem,i),hidden:n,children:e})}}}]);